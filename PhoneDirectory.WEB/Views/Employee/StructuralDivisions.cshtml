@model PhoneDirectory.WEB.Models.StructuralDivisionsFilterViewModel

@{
    ViewData["Title"] = "Номера отделов(городской и мобильный)";
    var StructuralDivisions = ViewData["StructuralDivisions"] as List<StructuralDivisionViewModel>;
}

<h1>@ViewData["Title"]</h1>
<p>
    <a href="#collapseFilter" class="btn btn-sm btn-outline-dark" role="button" title="Отбор" data-toggle="collapse" data-target="#collapseFilter" aria-expanded="false" aria-controls="collapseFilter"><span class="fa fa-filter"></span></a>
</p>
<div class="collapse mb-3" id="collapseFilter">
    <div class="card card-body">
        <form asp-action="StructuralDivisions" asp-antiforgery="true">
            <div asp-validation-summary="ModelOnly" class="text-danger"></div>
            <div class="form-row mb-3">
                <div class="col-md-4">
                    <div class="form-check mb-2">
                        <label class="form-check-label">
                            <input class="form-check-input" asp-for="UseStructuralDivision" /> Стр
                        </label>
                    </div>
                    <div class="form-group">
                        <label asp-for="StrucDivId" class="control-label"></label>
                        @Html.DropDownList("StrucDivId", null, htmlAttributes: new { @class = "form-control" })
                        <span asp-validation-for="StrucDivId" class="text-danger"></span>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-check mb-2">
                        <label class="form-check-label">
                            <input class="form-check-input" asp-for="UsePost" /> Стр
                        </label>
                    </div>
                    <div class="form-group">
                        <label asp-for="PostId" class="control-label"></label>
                        @Html.DropDownList("PostId", null, htmlAttributes: new { @class = "form-control" })
                        <span asp-validation-for="PostId" class="text-danger"></span>
                    </div>
                </div>

            </div>
            <input type="submit" value="Применить" class="btn btn-primary" />
        </form>
    </div>
</div>

@if (StructuralDivisions.Count() >= 0)
{
    <div class="row">
        @foreach (var item in StructuralDivisions)
        {
            <div class="col-sm-6 col-md-4 col-lg-3">
                <div class="card mb-3">
                    <div class="card-header text-white bg-info">
                        @item.Title
                    </div>
                    <div class="card-body bg-light">
                        <p class="h5 card-title mb-2">
                            @item.NameStrucDiv                            
                            @item.NamePost                           
                            Телефон отдела1(городской): @item.NameDepartmentNumber
                            Телефон отдела2(городской): @item.NameDepartmentNumber1
                            Телефон отдела1(мобильный): @item.NameDepartmentMobNumber
                            Телефон отдела2(мобильный): @item.NameDepartmentMobNumber1
                        </p>
                    </div>
                    <div class="mt-2">
                        <a asp-action="DepStaff" asp-controller="Employee" asp-route-id="@item.Id" class="btn btn-sm btn-outline-dark" title="Сотрудники отдела"><span class="fa fa-users"></span></a>                        
                    </div>
                </div>
            </div>
        }
    </div>
}
else
{
    <p class="text-danger">Не найдено отделов, соответствующих указанным условиям...</p>
}

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}
